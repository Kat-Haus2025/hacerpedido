<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Ruleta</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background: #f3f3f3;
            margin: 0;
            padding: 50px;
        }

        #ruleta {
            width: 350px;
            height: 350px;
            margin: 20px auto;
            transition: transform 4s cubic-bezier(0.1, 0.57, 0.1, 1);
        }

        #boton {
            background: #ff0055;
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 20px;
            cursor: pointer;
            margin-top: 20px;
        }

        #boton:disabled {
            background: #999;
            cursor: not-allowed;
        }

        #mensaje {
            margin-top: 20px;
            font-size: 18px;
            color: #333;
        }
    </style>
</head>
<body>

    <h1>Ruleta de premios</h1>

    <img id="ruleta" src="ruleta.png" alt="Ruleta">

    <button id="boton">Jugar</button>

    <div id="mensaje"></div>

    <script>
        const boton = document.getElementById("boton");
        const ruleta = document.getElementById("ruleta");
        const mensaje = document.getElementById("mensaje");

        // ----------------------------
        // 1) Verificar si ya jugó antes
        // ----------------------------

        let fechaRegistro = localStorage.getItem("primer_ingreso");

        if (!fechaRegistro) {
            // Primer ingreso: guardar fecha
            fechaRegistro = new Date().toLocaleString();
            localStorage.setItem("primer_ingreso", fechaRegistro);
        } else {
            // Ya había ingresado antes → bloquear juego
            boton.textContent = "Tu oportunidad expiró";
            boton.disabled = true;
            mensaje.textContent = "Tu oportunidad expiró en: " + fechaRegistro;
        }

        // ----------------------------
        // 2) Función para girar ruleta
        // ----------------------------
        boton.addEventListener("click", () => {
            if (boton.disabled) return; // seguridad extra

            // giro aleatorio (de 3 a 8 vueltas + ángulo random)
            const vueltas = Math.floor(Math.random() * 5) + 3;
            const randomAngle = Math.floor(Math.random() * 360);
            const anguloFinal = (vueltas * 360) + randomAngle;

            ruleta.style.transform = `rotate(${anguloFinal}deg)`;

            // Después de jugar → bloquear para siempre
            setTimeout(() => {
                boton.textContent = "Tu oportunidad expiró";
                boton.disabled = true;
                mensaje.textContent = "Tu oportunidad expiró en: " + fechaRegistro;
            }, 4500);
        });
    </script>

</body>
</html>
